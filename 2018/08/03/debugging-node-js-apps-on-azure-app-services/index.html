<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
    <script src="https://raw.githubusercontent.com/HubSpot/pace/v1.0.2/pace.min.js"></script>
    <link rel="stylesheet" href="https://github.com/HubSpot/pace/raw/master/themes/orange/pace-theme-flash.css">
  
  

  <!-- PACE Progress Bar START -->

  
  <title> debugging node.js apps on azure app services		 | Azure OSS Developer Support</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta name="description" content="A large part of software development involves troubleshooting. Logging is one of the mechanisms that is used to make it easier to enables the developers to see what the code is really doing. Therefore">
<meta property="og:type" content="article">
<meta property="og:title" content=" Debugging Node.js apps on Azure App Services		">
<meta property="og:url" content="http://azureossd.github.io/2018/08/03/debugging-node-js-apps-on-azure-app-services/index.html">
<meta property="og:site_name" content="Azure OSS Developer Support">
<meta property="og:description" content="A large part of software development involves troubleshooting. Logging is one of the mechanisms that is used to make it easier to enables the developers to see what the code is really doing. Therefore">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://azureossd.github.io/wp-content/uploads/2018/08/clip_image001_thumb1-1.jpg">
<meta property="og:image" content="http://azureossd.github.io/wp-content/uploads/2018/08/clip_image003_thumb1.jpg">
<meta property="og:image" content="http://azureossd.github.io/wp-content/uploads/2018/08/clip_image004_thumb1.jpg">
<meta property="og:updated_time" content="2019-03-26T06:41:54.144Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content=" Debugging Node.js apps on Azure App Services		">
<meta name="twitter:description" content="A large part of software development involves troubleshooting. Logging is one of the mechanisms that is used to make it easier to enables the developers to see what the code is really doing. Therefore">
<meta name="twitter:image" content="http://azureossd.github.io/wp-content/uploads/2018/08/clip_image001_thumb1-1.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Azure OSS Developer Support" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/hiero.css">
  <link rel="stylesheet" href="/css/glyphs.css">
  

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/my.css">
  <!-- Google Adsense -->
  
</head>
</html>
<script>
var themeMenus = {};

  themeMenus["/"] = "Home"; 

  themeMenus["/archives"] = "Archives"; 

</script>


  <body data-spy="scroll" data-target="#toc" data-offset="50">


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="Azure OSS Developer Support" rel="home"> Azure OSS Developer Support </a>
            
          </h1>

          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/archives">Archives</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt src>
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "css/images/pose.jpg,https://source.unsplash.com/collection/954550/1920x1080".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-debugging-node-js-apps-on-azure-app-services" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
       Debugging Node.js apps on Azure App Services		
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2018/08/03/debugging-node-js-apps-on-azure-app-services/" class="article-date">
	  <time datetime="2018-08-03T14:30:40.000Z" itemprop="datePublished">August 3, 2018</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>A large part of software development involves troubleshooting. Logging is one of the mechanisms that is used to make it easier to enables the developers to see what the code is really doing. Therefore, It is necessary to have the proper logging to troubleshoot the issues faster , which otherwise will become nearly impossible to nail down the application issues. Here, in this article, I will explain how to enable <strong>node.js</strong> application level logging on <strong>Azure App Service(Windows)</strong> to visualize the logs that are placed in your code. Azure App services comes in 2 offerings</p>
<ol>
<li><strong><em>App Service Windows</em></strong></li>
<li><strong><em>App Service Linux(Blessed/Custom Images)</em></strong> : Refer to the article <a href="https://blogs.msdn.microsoft.com/azureossds/2018/08/30/debugging-node-js-applications-on-azure-app-services-linux-containers/" target="_blank" rel="noopener">here</a> for detailed information of logging on App Service Linux</li>
</ol>
<p><strong>Enable logging on Windows</strong>: Below are the two ways of achieving it</p>
<ol>
<li>Using portal</li>
<li>Using iisnode.yml file</li>
</ol>
<p><strong>Using Portal</strong></p>
<ul>
<li>Navigate to your webapp from the azure portal</li>
<li>Choose the Diagnostic Logs blade. For application level logging, You can either choose <strong>Filesystem</strong> or <strong>Blob storage</strong></li>
<li>Below is the snapshot of the Filesystem option</li>
</ul>
<p><a href="/wp-content/uploads/2018/08/clip_image0011.jpg"><img src="/wp-content/uploads/2018/08/clip_image001_thumb1-1.jpg" alt="clip_image001" title="clip_image001"></a></p>
<ul>
<li>Notice that the logging will get <strong>turned off</strong> automatically after <strong>12 hrs</strong>. The reason being you have a limited set of storage you have on the local file system, which will be <strong>1GB - 250GB</strong> depending on your App Service Plan (size). This could affect the site performance due to excessive writing to the file system. You also get to choose the logging level here.</li>
<li>This limitation is not applicable if you choose blob storage option. However, for node.js it is not straight forward to store the logs in the blob storage. Check out the article <a href="here">here</a> to know how to use this option in node.js to store the logs to <strong>azure storage</strong>.</li>
<li><p>Once the above step is done, You can view these logs on your file system by following the steps below</p>
</li>
<li><p>Go to your file system by browsing <a href="https://%7bwebapp_name%7d.scm.azurewebsites.net" target="_blank" rel="noopener">https://{webapp_name}.scm.azurewebsites.net</a> (called as kudu site) url</p>
</li>
<li>Click on <strong>Debug Console –&gt;</strong> <strong>cmd –&gt;</strong> <strong>LogFiles –&gt;</strong> <strong>Application</strong></li>
<li>Files of interest here: index.html and logging-errors.txt</li>
</ul>
<p><a href="/wp-content/uploads/2018/08/clip_image003-11.jpg"><img src="/wp-content/uploads/2018/08/clip_image003_thumb1.jpg" alt="clip_image003" title="clip_image003"></a></p>
<ul>
<li>Click on the download symbol beside the index.html to get a pretty view of the stderr and stdout logging. Below is the screenshot of the same. Once you click on the log link, you will be able to see the details of the message</li>
</ul>
<p><a href="/wp-content/uploads/2018/08/clip_image0041.jpg"><img src="/wp-content/uploads/2018/08/clip_image004_thumb1.jpg" alt="clip_image004" title="clip_image004"></a></p>
<ul>
<li>The logging-errors.txt captures all the uncaught exceptions that occur at the run time of your application.</li>
</ul>
<p><strong>Using iisnode.yml</strong></p>
<ul>
<li>This option requires you to create a new file called <strong>iisnode.yml</strong> (This specifies all the configuration at the iisnode level)</li>
<li>Go to the kudu site of your webapp (<a href="https://%7bwebapp_name%7d.scm.azurewebsites.net" target="_blank" rel="noopener">https://{webapp_name}.scm.azurewebsites.net</a>)</li>
<li>Click on <strong>Debug Console –&gt;</strong> <strong>cmd –&gt;</strong> <strong>site –&gt; wwwroot</strong></li>
<li><p>Create a file named iisnode.yml and place the content below</p>
<pre><code>loggingEnabled: true
</code></pre></li>
<li><p>Once this is done, you can view the logs again by following the same method as described above in “Using Portal” Section by going to <strong>Debug Console –&gt;</strong> <strong>cmd –&gt;</strong> <strong>LogFiles –&gt;</strong> <strong>Application</strong></p>
</li>
<li>Notice that this logging will also be turned off after 12 hrs for the same reason as described above under “Using Portal” section</li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/Azure-App-Service-Web-App/">Azure App Service Web App</a>

      
      
            
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/08/30/debugging-node-js-applications-on-azure-app-services-linux-containers/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
           Debugging Node.js applications on Azure App Services Linux/containers		
        
      </div>
    </a>
  
  
    <a href="/2018/05/22/configure-wordpress-database-connection-on-azure-app-services/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"> Configure WordPress Database Connection on Azure App Services		</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article" style="overflow-y: scroll; max-width: 28%;">
    <strong class="toc-title">Contents</strong>
    
      <ol class="nav">None</ol>
    
    </div>
  </aside>
</section>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2019 Azure OSS Developer Support All Rights Reserved.
          
      </div>
      <div class="site-credit">
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->
<script src="/js/my.js"></script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>


<script src="/js/scripts.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>








  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
