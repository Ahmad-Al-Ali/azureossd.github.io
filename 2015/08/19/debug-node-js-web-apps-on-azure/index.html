<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
    <script src="https://raw.githubusercontent.com/HubSpot/pace/v1.0.2/pace.min.js"></script>
    <link rel="stylesheet" href="https://github.com/HubSpot/pace/raw/master/themes/orange/pace-theme-flash.css">
  
  

  <!-- PACE Progress Bar START -->

  
  <title> debug node.js web apps on azure		 | Azure OSS Developer Support</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="troubleshootnodejslogging-errorsremote-debug">
  
  
  
  
  <meta name="description" content="Azure provides built-in diagnostics to assist with debugging Node.js applications hosted in Azure App Service Web Apps. In this article, you will learn how to enable logging of stdout and stderr, disp">
<meta name="keywords" content="troubleshoot,nodejs,logging-errors,remote-debug">
<meta property="og:type" content="article">
<meta property="og:title" content=" Debug Node.js Web Apps on Azure		">
<meta property="og:url" content="http://azureossd.github.io/2015/08/19/debug-node-js-web-apps-on-azure/index.html">
<meta property="og:site_name" content="Azure OSS Developer Support">
<meta property="og:description" content="Azure provides built-in diagnostics to assist with debugging Node.js applications hosted in Azure App Service Web Apps. In this article, you will learn how to enable logging of stdout and stderr, disp">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://azureossd.github.io/wp-content/uploads/2019/03/1362.failed_request.JPG">
<meta property="og:image" content="http://azureossd.github.io/wp-content/uploads/2019/03/5415.freb_logs.JPG">
<meta property="og:image" content="http://azureossd.github.io/wp-content/uploads/2019/03/4721.unhandled_exception.JPG">
<meta property="og:image" content="http://azureossd.github.io/wp-content/uploads/2019/03/8304.stdout_stderror.JPG">
<meta property="og:image" content="http://azureossd.github.io/wp-content/uploads/2019/03/8233.application_log.JPG">
<meta property="og:image" content="http://azureossd.github.io/wp-content/uploads/2019/03/5826.node_inspector.png">
<meta property="og:image" content="http://azureossd.github.io/wp-content/uploads/2019/03/2548.debug_header.JPG">
<meta property="og:updated_time" content="2019-03-26T06:37:33.540Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content=" Debug Node.js Web Apps on Azure		">
<meta name="twitter:description" content="Azure provides built-in diagnostics to assist with debugging Node.js applications hosted in Azure App Service Web Apps. In this article, you will learn how to enable logging of stdout and stderr, disp">
<meta name="twitter:image" content="http://azureossd.github.io/wp-content/uploads/2019/03/1362.failed_request.JPG">
  
    <link rel="alternate" href="/atom.xml" title="Azure OSS Developer Support" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/hiero.css">
  <link rel="stylesheet" href="/css/glyphs.css">
  

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/my.css">
  <!-- Google Adsense -->
  
</head>
</html>
<script>
var themeMenus = {};

  themeMenus["/"] = "Home"; 

  themeMenus["/archives"] = "Archives"; 

</script>


  <body data-spy="scroll" data-target="#toc" data-offset="50">


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="Azure OSS Developer Support" rel="home"> Azure OSS Developer Support </a>
            
          </h1>

          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/archives">Archives</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt src>
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "css/images/pose.jpg,https://source.unsplash.com/collection/954550/1920x1080".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-debug-node-js-web-apps-on-azure" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
       Debug Node.js Web Apps on Azure		
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2015/08/19/debug-node-js-web-apps-on-azure/" class="article-date">
	  <time datetime="2015-08-19T18:20:00.000Z" itemprop="datePublished">August 19, 2015</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>Azure provides built-in diagnostics to assist with debugging Node.js applications hosted in Azure App Service Web Apps. In this article, you will learn how to enable logging of stdout and stderr, display error information in the browser, and how to get heap and CPU profiles.</p>
<p>Diagnostics for Node.js applications hosted on Azure is provided by IISNode. While this article discusses the most common settings for gathering diagnostics information, it does not provide a complete reference for working with IISNode. For more information on working with IISNode, see the IISNode Readme on GitHub.</p>
<p><strong>Finding Error Info:</strong></p>
<p>If you are receiving a 500 error on your node.js webapp, Here are few things which you can try to get more info</p>
<p>1) Watch error info on web page (not recommended for production app)</p>
<p>  Include below line of code in iisnode.yml file at webapp root folder(D:\home\site\wwwroot).</p>
<pre><code>devErrorsEnabled: true
</code></pre><p>  After including above line, restart your web app and You would start seeing something like below on web browser.</p>
<pre><code>iisnode encountered an error when processing the request.  HRESULT: 0x6d HTTP status: 500 HTTP subStatus: 1013 HTTP reason: Internal Server Error
</code></pre><p>2) Using Failed request tracing in azure webapps </p>
<ul>
<li>Select your web app in Azure portal(<a href="https://ms.portal.azure.com/" target="_blank" rel="noopener">https://ms.portal.azure.com/</a>).</li>
<li><p>Click on Diagnostic logs in webapp settings and Turn On Failed Request Tracing in Diagnostic Logs Tab.</p>
<p><a href="/wp-content/uploads/2019/03/1362.failed_request.JPG"><img src="/wp-content/uploads/2019/03/1362.failed_request.JPG" alt></a></p>
</li>
<li><p>After turning on Failed Request Tracing, Access your error page in browser. This would create new folders(W3SV<em>**</em>) containing failed request logs @ D:\home\LogFiles\ in kudu console(<a href="https://Your_Website_name.scm.azurewebsites.net/DebugConsole" target="_blank" rel="noopener">https://Your_Website_name.scm.azurewebsites.net/DebugConsole).</a></p>
</li>
<li>Failed request logs would provide you more meaningful info about application error. Below is a sample screenshot</li>
</ul>
<p><a href="/wp-content/uploads/2019/03/5415.freb_logs.JPG"><img src="/wp-content/uploads/2019/03/5415.freb_logs.JPG" alt></a></p>
<p><strong>Useful Logs :</strong></p>
<p>To Troubleshoot above issue, below logs may help you</p>
<p>- Uncaught Exception: All uncaught exceptions are by default written to logging-errors.txt file in D:\home\LogFiles\Application folder. You can view them using kudu console(<a href="https://Your_Website_name.scm.azurewebsites.net/DebugConsole" target="_blank" rel="noopener">https://Your_Webapp_name.scm.azurewebsites.net/DebugConsole).</a></p>
<p> <a href="/wp-content/uploads/2019/03/4721.unhandled_exception.JPG"><img src="/wp-content/uploads/2019/03/4721.unhandled_exception.JPG" alt></a></p>
<p>- stdout and stderror:</p>
<p>stdout : console.log(“log content”)  -  log content would be visible in  XXX-stdout-xxx.txt file @ D:\home\LogFiles\Application folder</p>
<p>stderror: console.error(“error content”) - error content would be visible in XXX-stderr-xxx.txt file @ D:\home\LogFiles\Application folder</p>
<p><a href="/wp-content/uploads/2019/03/8304.stdout_stderror.JPG"><img src="/wp-content/uploads/2019/03/8304.stdout_stderror.JPG" alt></a></p>
<p>You can turn-on these stdout and stderr using below two ways</p>
<p>1) Using iisnode.yml file : Include below line of code in iisnode.yml file at webapp root folder(D:\home\site\wwwroot).</p>
<pre><code>loggingEnabled: true
</code></pre><p>2) Using Azure Portal :</p>
<ul>
<li>Select your web app in Azure portal(<a href="https://ms.portal.azure.com/" target="_blank" rel="noopener">https://ms.portal.azure.com/</a>).</li>
<li>Click on Diagnostic logs in settings option and Turn On Application logging in Diagnostic Logs Tab.</li>
</ul>
<p><a href="/wp-content/uploads/2019/03/8233.application_log.JPG"><img src="/wp-content/uploads/2019/03/8233.application_log.JPG" alt></a></p>
<p><strong>Remote debug :</strong></p>
<p><strong>Below content explains how to remotely debug your Node.js application deployed on Azure Web Apps using the node-inspector debugger.</strong></p>
<p><strong>1) Enter below line of code in iisnode.yml file at webapp root folder(D:\home\site\wwwroot).</strong></p>
<pre><code>debuggingEnabled: true
</code></pre><p><strong>2) Check if your web.config file has below rule, else Include it.</strong></p>
<pre><code>&lt;rule name=&quot;NodeInspector&quot; patternSyntax=&quot;ECMAScript&quot; stopProcessing=&quot;true&quot;&gt;  &lt;match url=&quot;^server.js\/debug[\/]?&quot; /&gt; &lt;/rule&gt;
</code></pre><p><strong>3) Navigate to <a href="http://yourapp.azurewebsites.net/server.js/debug" target="_blank" rel="noopener">http://yourapp.azurewebsites.net/server.js/debug</a>_._**</strong><em>This should bring up the familiar node-inspector interface for your application, which allows you to set breakpoints, inspect code, etc</em>**</p>
<p><strong><a href="/wp-content/uploads/2019/03/5826.node_inspector.png"><img src="/wp-content/uploads/2019/03/5826.node_inspector.png" alt></a></strong></p>
<p><strong>For Advanced configuration on using custom debug url, please refer <a href="http://tomasz.janczuk.org/2013/07/debug-nodejs-applications-in-windows.html" target="_blank" rel="noopener">http://tomasz.janczuk.org/2013/07/debug-nodejs-applications-in-windows.html</a></strong></p>
<p><strong>More Debug Info:</strong></p>
<p><strong>1) Enter below line of code in iisnode.yml file at webapp root folder(D:\home\site\wwwroot)</strong>.</p>
<pre><code>debugHeaderEnabled: true
</code></pre><p>After making above change you would see a url in each response header as in below screen shot. It would provide us insights into state of node.js application.</p>
<p><a href="/wp-content/uploads/2019/03/2548.debug_header.JPG"><img src="/wp-content/uploads/2019/03/2548.debug_header.JPG" alt></a></p>
<p>Sample Url : <a href="http://bit.ly/NsU2nd#iisnode_ver=0.2.19&amp;node=node.exe&amp;dns=RD000D3A7037D6&amp;worker_pid=6056&amp;node_pid=2556&amp;worker_mem_ws=9676&amp;worker_mem_pagefile=31928&amp;node_mem_ws=29872&amp;node_mem_pagefile=29372&amp;app_processes=1&amp;process_active_req=1&amp;app_active_req=1&amp;worker_total_req=21&amp;np_retry=0&amp;req_time=221&amp;hresult=0" target="_blank" rel="noopener">http://bit.ly/NsU2nd#iisnode_ver=0.2.19&amp;node=node.exe&amp;dns=RD000D3A7037D6&amp;worker_pid=6056&amp;node_pid=2556&amp;worker_mem_ws=9676&amp;worker_mem_pagefile=31928&amp;node_mem_ws=29872&amp;node_mem_pagefile=29372&amp;app_processes=1&amp;process_active_req=1&amp;app_active_req=1&amp;worker_total_req=21&amp;np_retry=0&amp;req_time=221&amp;hresult=0</a></p>
<p>Please find more details @ <a href="http://tomasz.janczuk.org/2012/11/diagnose-nodejs-apps-hosted-in-iis-with.html" target="_blank" rel="noopener">http://tomasz.janczuk.org/2012/11/diagnose-nodejs-apps-hosted-in-iis-with.html</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/Uncategorized/">Uncategorized</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/logging-errors/">logging-errors</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/remote-debug/">remote-debug</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/troubleshoot/">troubleshoot</a></li></ul>

      
            
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/08/23/finding-memory-leaks-and-cpu-usage-in-azure-node-js-web-app/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
           Finding Memory Leaks and CPU Usage in Azure Node.js Web App		
        
      </div>
    </a>
  
  
    <a href="/2015/08/04/debug-django-web-application-in-azure-web-apps/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"> Debug Django Web Application in Azure Web Apps		</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article" style="overflow-y: scroll; max-width: 28%;">
    <strong class="toc-title">Contents</strong>
    
      <ol class="nav">None</ol>
    
    </div>
  </aside>
</section>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2019 Azure OSS Developer Support All Rights Reserved.
          
      </div>
      <div class="site-credit">
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->
<script src="/js/my.js"></script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>


<script src="/js/scripts.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>








  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
