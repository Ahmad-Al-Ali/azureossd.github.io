<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
    <script src="https://raw.githubusercontent.com/HubSpot/pace/v1.0.2/pace.min.js"></script>
    <link rel="stylesheet" href="https://github.com/HubSpot/pace/raw/master/themes/orange/pace-theme-flash.css">
  
  

  <!-- PACE Progress Bar START -->

  
  <title> troubleshooting mysql database on cleardb		 | Azure OSS Developer Support</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="Web AppsazureClearDB Troubleshootingcleardbmysqlwordpress troubleshooting">
  
  
  
  
  <meta name="description" content="This article covers some common scenarios customers may run into using ClearDB with Microsoft Azure. For reference, here is a link to the ClearDB FAQ: https://www.cleardb.com/developers/help/faq As li">
<meta name="keywords" content="Web Apps,azure,ClearDB Troubleshooting,cleardb,mysql,wordpress troubleshooting">
<meta property="og:type" content="article">
<meta property="og:title" content=" Troubleshooting MySQL Database on ClearDB		">
<meta property="og:url" content="http://azureossd.github.io/2015/05/07/troubleshooting-mysql-database-on-cleardb/index.html">
<meta property="og:site_name" content="Azure OSS Developer Support">
<meta property="og:description" content="This article covers some common scenarios customers may run into using ClearDB with Microsoft Azure. For reference, here is a link to the ClearDB FAQ: https://www.cleardb.com/developers/help/faq As li">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://azureossd.github.io/wp-content/uploads/2019/03/1541.management.png">
<meta property="og:image" content="http://azureossd.github.io/wp-content/uploads/2019/03/8228.update_error2.png">
<meta property="og:image" content="http://azureossd.github.io/wp-content/uploads/2019/03/2703.insert_error.png">
<meta property="og:image" content="http://azureossd.github.io/wp-content/uploads/2019/03/7587.linked_resources.png">
<meta property="og:image" content="http://azureossd.github.io/wp-content/uploads/2019/03/6254.database_growth.png">
<meta property="og:image" content="http://azureossd.github.io/wp-content/uploads/2019/03/8203.connection_strings.png">
<meta property="og:image" content="http://azureossd.github.io/wp-content/uploads/2019/03/7658.strings_detail.png">
<meta property="og:image" content="http://azureossd.github.io/wp-content/uploads/2019/03/1616.site_extension_menu.png">
<meta property="og:image" content="http://azureossd.github.io/wp-content/uploads/2019/03/2063.gallery_site_extensions.png">
<meta property="og:image" content="http://azureossd.github.io/wp-content/uploads/2019/03/3438.site_extension_phpmya.png">
<meta property="og:updated_time" content="2019-03-26T20:15:43.203Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content=" Troubleshooting MySQL Database on ClearDB		">
<meta name="twitter:description" content="This article covers some common scenarios customers may run into using ClearDB with Microsoft Azure. For reference, here is a link to the ClearDB FAQ: https://www.cleardb.com/developers/help/faq As li">
<meta name="twitter:image" content="http://azureossd.github.io/wp-content/uploads/2019/03/1541.management.png">
  
    <link rel="alternate" href="/atom.xml" title="Azure OSS Developer Support" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/hiero.css">
  <link rel="stylesheet" href="/css/glyphs.css">
  

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/my.css">
  <!-- Google Adsense -->
  
</head>
</html>
<script>
var themeMenus = {};

  themeMenus["/"] = "Home"; 

  themeMenus["/archives"] = "Archives"; 

</script>


  <body data-spy="scroll" data-target="#toc" data-offset="50">


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="Azure OSS Developer Support" rel="home"> Azure OSS Developer Support </a>
            
          </h1>

          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/archives">Archives</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt src>
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "css/images/pose.jpg,https://source.unsplash.com/collection/954550/1920x1080".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-troubleshooting-mysql-database-on-cleardb" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
       Troubleshooting MySQL Database on ClearDB		
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2015/05/07/troubleshooting-mysql-database-on-cleardb/" class="article-date">
	  <time datetime="2015-05-07T21:27:44.000Z" itemprop="datePublished">May 7, 2015</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>This article covers some common scenarios customers may run into using ClearDB with Microsoft Azure. For reference, here is a link to the ClearDB FAQ: <a href="https://www.cleardb.com/developers/help/faq" title="https://www.cleardb.com/developers/help/faq" target="_blank" rel="noopener">https://www.cleardb.com/developers/help/faq</a> As listed on the ClearDB FAQ, there are some general guidelines for using ClearDB. These guidelines include limitations on:</p>
<ul>
<li>Maximum Database Connections</li>
<li>Maximum Database Size</li>
<li>Maximum SELECT Query Execution Time</li>
</ul>
<p>* Maximum amounts vary depending on your <a href="https://www.cleardb.com/store/azure" target="_blank" rel="noopener">subscription plan</a>.</p>
<hr>
<p><strong>Error Message</strong></p>
<p>Error establishing a database connection <strong>(displayed on web site)</strong></p>
<p>PHP Warning: mysqli_real_connect(): (HY000/1226): User ‘abcdefghijk79’ has exceeded the ‘max_user_connections’ resource (current value: 4) in D:\home\site\wwwroot\wp-includes\wp-db.php on line 1454 <strong>(displayed in php_errors.log or WordPress debug.log)</strong></p>
<p><strong>Source</strong></p>
<p>Web site, php_errors.log or debug.log</p>
<p><strong>Solution</strong></p>
<p>If you see this error in your debug.log or php_errors.log, then your application is exceeding the number of connections. If you’re hosting on ClearDB, please verify that number of connections available in your <a href="https://www.cleardb.com/pricing.view" target="_blank" rel="noopener">service plan</a>.</p>
<hr>
<p><strong>Error Message</strong></p>
<p>The management site for the database isn’t available right now. Please try again later.</p>
<p><strong>Source</strong></p>
<p>Microsoft Azure Dashboard &gt; Linked Resources &gt; Database Name</p>
<p><strong>Example</strong></p>
<p><strong><img src="/wp-content/uploads/2019/03/1541.management.png" alt></strong></p>
<p><strong>Solution</strong></p>
<p>The link between Azure and ClearDB <em>may</em> have been broken or was never linked to begin with. Email <a href="mailto:support@cleardb.com" target="_blank" rel="noopener">support@cleardb.com</a> and provide the Subscription ID located within the <a href="/wp-content/uploads/2019/03/2068.subscription_id.png">Azure Dashboard (lower-right corner)</a>.</p>
<hr>
<p><strong>Error Message</strong></p>
<p>Operation failed: There was an error while applying the SQL script to the database.</p>
<p>ERROR 1142: 1142: UPDATE command denied to user ‘name@ip’ for table ‘table_name’.</p>
<p><strong>Source</strong></p>
<p>MySQL Client/ DB Server Response in Application Code</p>
<p><strong>Example</strong></p>
<p><img src="/wp-content/uploads/2019/03/8228.update_error2.png" alt></p>
<p><strong>Solution</strong></p>
<p>There are multiple reasons this may occur, but a common one is due to the subscription quota being exceeded. See the question below “How do I check the current size of my MySQL Database on ClearDB?”</p>
<p>If you have in-fact gone over your limit, please upgrade or read tips below on how to reduce your disk usage.</p>
<hr>
<p><strong>Error Message</strong></p>
<p>Error Code: 1142. INSERT command denied to user ‘name@ip’ for table ‘table_name’.</p>
<p><strong>Source</strong></p>
<p>MySQL Client/ DB Server Response in Application Code</p>
<p><strong>Example</strong></p>
<p><img src="/wp-content/uploads/2019/03/2703.insert_error.png" alt></p>
<p><strong>Solution</strong></p>
<p>This may also point to the subscription quota being exceeded. Read below on how to check your current size on the MySQL database.</p>
<p>If you have in-fact gone over your limit, please upgrade or read tips below on how to reduce your disk usage.</p>
<hr>
<p>How do I check the current size of my MySQL database on ClearDB? There are multiple options to check your current size. One solution is through the Azure Portal and the other is to run a query on your database instance:</p>
<p><strong>1) Using Azure Portal</strong></p>
<p><img src="/wp-content/uploads/2019/03/7587.linked_resources.png" alt></p>
<p><img src="/wp-content/uploads/2019/03/6254.database_growth.png" alt></p>
<p><strong>2) Using a MySQL Client, run a query on your ClearDB Database</strong></p>
<pre><code>SELECT
       table_schema &quot;Data Base Name&quot;,
       sum( data\_length + index\_length ) / 1024 / 1024 &quot;Data Base Size in MB&quot;
FROM
       information_schema.TABLES
GROUP BY
       table_schema;
</code></pre><hr>
<p>My ClearDB MySQL Database quota is exceeded, now what? The simplest solution is to <a href="https://www.cleardb.com/store/azure" target="_blank" rel="noopener">upgrade to the recommended subscription on ClearDB</a>, especially if you’re on the Mercury Tier. If you are still developing your app and want to remain on the free, Mercury Tier, then you will need to get rid of extra data. Use the following query to find which tables are taking up space:</p>
<pre><code>SELECT
       table_name AS &quot;Table&quot;,
       round(((data\_length + index\_length) / 1024 / 1024), 2) MB
FROM
       information_schema.TABLES
WHERE
       table_schema = &quot;**&lt;SCHEMA/DATABASE NAME HERE&gt;&quot;**
ORDER BY
       MB desc;
</code></pre><hr>
<p>Where do I find my MySQL connection details?</p>
<p>Through the Azure Dashboard, click on “View Connection Strings”</p>
<p><img src="/wp-content/uploads/2019/03/8203.connection_strings.png" alt></p>
<p><img src="/wp-content/uploads/2019/03/7658.strings_detail.png" alt></p>
<p>This will pop-up a window with the following connection information:</p>
<ul>
<li>Database (AKA Schema)</li>
<li>Data Source (Host Name)</li>
<li>UserID</li>
<li>Password</li>
</ul>
<hr>
<p>How do I connect to my MySQL Database on ClearDB?</p>
<p><strong>1) <a href="http://www.bing.com/search?q=download+mysql+client&amp;go=Submit&amp;qs=n&amp;form=QBLH&amp;pq=download+mysql+clien&amp;sc=8-15&amp;sp=-1&amp;sk=&amp;ghc=1&amp;cvid=46f98f58c2284e1ea45a6afde72e4801" target="_blank" rel="noopener">Use a MySQL Client</a>.</strong></p>
<p><strong>2) Use the PHP My Admin site extension</strong></p>
<p>Step 1. Go to your website with the following URL format:   http://&lt;sitename&gt;.scm.azurewebsites.net</p>
<p>Step 2. Click “Site Extension”</p>
<p><img src="/wp-content/uploads/2019/03/1616.site_extension_menu.png" alt></p>
<p>Step 3. Select “Gallery”</p>
<p><img src="/wp-content/uploads/2019/03/2063.gallery_site_extensions.png" alt></p>
<p>Step 4. Find phpMyAdmin and click the plus button. Once installed, launch the extension by clicking the play button.</p>
<p><img src="/wp-content/uploads/2019/03/3438.site_extension_phpmya.png" alt></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/ClearDB/">ClearDB</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ClearDB-Troubleshooting/">ClearDB Troubleshooting</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Web-Apps/">Web Apps</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/azure/">azure</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cleardb/">cleardb</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/wordpress-troubleshooting/">wordpress troubleshooting</a></li></ul>

      
            
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/05/08/running-java8-on-azure-web-apps/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
           Running Java8 on Azure web apps		
        
      </div>
    </a>
  
  
    <a href="/2015/05/01/magento-web-config-for-azure-and-iis/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"> Magento Web.Config for Azure and IIS		</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article" style="overflow-y: scroll; max-width: 28%;">
    <strong class="toc-title">Contents</strong>
    
      <ol class="nav">None</ol>
    
    </div>
  </aside>
</section>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2019 Azure OSS Developer Support All Rights Reserved.
          
      </div>
      <div class="site-credit">
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->
<script src="/js/my.js"></script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>


<script src="/js/scripts.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>








  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
